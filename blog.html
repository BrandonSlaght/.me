<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>Blog - Brandon Slaght</title>
    <link rel="apple-touch-icon" sizes="57x57" href="apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="stylesheets/normalize.css">
    <link rel="stylesheet" href="stylesheets/styles.css">
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="javascripts/jquery.bootstrap-autohidingnavbar.js"></script>
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-41008645-5', 'auto');
      ga('send', 'pageview');

    </script>
  </head>
  <body>
    <header>
      <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container-fluid">
          <ul class="nav navbar-nav">
            <li class="active"><a href="blog.html"> Blog </a></li>
            <li><a href="index.html" class="navbar-brand">Brandon Slaght</a></li>
            <li><a href="resume.html">Résumé</a></li>
          </ul>
        </div>
      </nav>

      <div class = "banner" id="blog">
        <div class = "darken">
          <h1 class="text-center hero-text">The musings of Brandon Slaght</h1>
          <h3 class="text-center hero-text">This is where I would blog about cool CS problems I had to solve... If I was allowed to.</h3>
        </div>
      </div>
    </header>
    <div class="container-fluid blog body">
      <span class="label label-default">1/12/16</span>
      <h2>
        Fading text on a DrawerLayout in Android
      </h2>
      <p>
        Some applications, (notably, past versions of Spotify) have a drawerlayout which has the toolbar sitting above the drawer itself, so apps have the ability to display separate titles for both drawer states.  Now, having different titles for the different drawer states can be trivially acvieved by setting them in the <code>ActionBarDrawerToggle</code> constructor:
        <pre>
        toggle = new ActionBarDrawerToggle(this, mDrawerLayout, mToolbar, R.string.title1, R.string.title2){...
          @Override
          public void onDrawerSlide(View drawerView, float slideOffset) {
            super.onDrawerSlide(drawerView,slideOffset);
            if(slideOffset > .50 && !isDrawerOpen){
              toolbar.setTitle("Profile");
              isDrawerOpen = true;
            } else if(slideOffset <= .50 && isDrawerOpen) {
              toolbar.setTitle("BandInsider");
              isDrawerOpen = false;
            }
          }
        };
        </pre>
        The float parameter passed in to the <code>onDrawerSlide</code> method is a number from 0.00 to 1.00 which represents the percent that the drawer is extended.  Here we change the title when the drawer is halfway open or closed.  However, this ends up looking pretty ugly when animated: 
      </p>
      <img src="images/no_fade_title.gif" class="center img-responsive">
      <p>
        Now here, a trick we can do is to change the opacity of the title so that it is transparent when the title changes.  We can whip up a quick math function that takes in a variable x, and gives values of 255 when x is 0 and 1, and gives a value of 0 when x is 0.5 (halfway open/closed):
      </p>
      <img src="images/abs_function.png" class="center img-responsive">
      <p>
        Of course, since we need a proper alpha value to set the title text color, we have to scale this function by 255:
        <pre>
          toolbar.setTitleTextColor(Color.argb((int)(255*(2*(Math.abs(.5-slideOffset)))),255,255,255));
        </pre>
        Here it is, implemented at the very end of our <code>onDrawerSlide</code> function:
      </p>
      <img src="images/linear_fade_title.gif" class="center img-responsive">
      <p>
        As you can see, having the title be completely transparent when it changes text results in a much smoother animation.  However, it still seems a little jarring when viewed at a fast speed.  We can do better by constructing a parabolic curve instead of a linear one:
      </p>
      <img src="images/para_function.png" class="center img-responsive">
      <p>
        <pre>
          toolbar.setTitleTextColor(Color.argb((int)(255*(4*Math.pow(slideOffset-.5,2))),255,255,255));
        </pre>
      </p>
      <img src="images/parabolic_fade_title.gif" class="center img-responsive">
      <p>
        Now the text animates very smoothly.  If anyone can come up with something better, like a bell curve, drop me an email!
      </p>
      <hr>
      <span class="label label-default">10/4/15</span>
      <h2>
        The mess that is Android
      </h2>
      <p>
        Recently, thanks to my Android app development class, I've gotten into Android programming, and as a result, I've noticed how deeply flawed the platform is.  Now, I am no stranger to Android.  My first smartphone was a Droid 2, I have a Galaxy S 4 & Galaxy Tab 10.1, and I know my way around custom roms, rooting, bootloaders and the like.  But to be honest, I hadn't actually used an Android phone in 4 years until about a month ago when I found that GS4.  I booted it up, hoping to see that Android had improved, but alas, it had made no progress in 4 years.  The same problems still plagued the platform: 
      </p>
      <h3>
        Bloatware
      </h3>
      <p>
        This is the most infuriating problem to me.  It's like phone makers are willing to deliberately sacrifice software quality in order to make some extra cash.  This may make sense for low end, $0 on contract phones, but what about a $200 flagship smartphone?  When I reset and updated the GS4, I ended up with over 50 preinstalled apps.  3 music apps, 2 video apps, 2 messaging apps, countless AT&T apps trying to sell extra services that nobody ever uses, among a dozen other apps which added absolutely nothing to the device.  All of these were permanent and not removable to the average user.  A few of them even spammed notifications daily.  So much bloat fills up a phone and detracts from the user experience.  iOS and even Windows Phone do not have this problem.  
      </p>
      <h3>
        Vulnerabilities
      </h3>
      <p>
        Recently, two major vulnerabilities in Android surfaced: one allowing <a href="http://www.wired.com/2015/09/hack-brief-new-emergency-number-hack-easily-bypasses-android-lock-screens/">attackers to bypass user's lockscreens</a>, and another <a href="http://www.androidcentral.com/stagefright">in the media decoder</a>, both affecting millions of devices.  Software as complicated as an operating system is generally insecure, but most operating systems are updated continuously.  In theory, Android is too, but millions of devices affected by these vulnerabilities will remain vulnerable due to the last problem:
      </p>
      <h3>
        Lack of Updates
      </h3>
      <blockquote class="twitter-tweet" lang="en"><p lang="en" dir="ltr">Android 6.0 images are out! I have a *single* Android device that’s eligible (…out of 30?) <a href="https://t.co/rbaKQem9hl">https://t.co/rbaKQem9hl</a> /via <a href="https://twitter.com/b3ll">@b3ll</a></p>&mdash; Steve T-S (@stroughtonsmith) <a href="https://twitter.com/stroughtonsmith/status/651218345174265860">October 6, 2015</a></blockquote>
      <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
      <p>
        My Droid 2 got one official update, from 2.2 to 2.3.  Keep in mind, this was a flagship, top of the line phone, and there was no excuse for Motorola to drop support so quickly.  This fate happens to many phones, even recently.  Motorola will end support for the Moto E, <a href="http://www.androidpolice.com/2015/10/02/wtf-motorola-marketed-the-moto-e-2015-on-promise-of-updates-is-now-apparently-ending-them-after-219-days/">after 219 days, 1 update, and the promise of more.</a>  Many phone manufacturers seem to drop support for devices after a year or so, halfway through a standard phone contract.  Contrast this to Apple, who recently made iOS 9 available on the iPhone 4s, a phone that launched 4 years ago, on the same day that everyone else got it.  This problem makes Android a nightmare for developers, as we have to target year-old api levels in order to capture compatibility with a reasonable number of devices.
      </p>
      <p>
        These issues in Android seriously need to be addressed in order for it to compete long term with iOS.  Google could easily leverage carriers and manufacturers to fix these flaws, which leaves me to question why they haven't yet.  
      </p>
    </div>
    <footer>
      <p class="text-center">&copy; Brandon Slaght</p>
    </footer>
    <script src="javascripts/scale.fix.js"></script>
    <script type="text/javascript">
      $(".navbar-fixed-top").autoHidingNavbar();
    </script>
  </body>
</html>
